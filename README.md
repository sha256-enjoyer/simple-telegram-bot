# Settings

Для чтения всех сообщений в канале ваш бот должен иметь выключенный `Privacy mode` в BotFather.

`src/.env`: настройки окружения

`src/settings.json`: хранение и восстановление состояния после перезапуска бота


## .env
```
token=ВАШ ТОКЕН ОТ BotFather
admin_id=ID администратора бота (см. далее)
settings=settings.json - расположение файла состояний
default_parse_mode=Markdown
default_channel= - здесь ID канала, в который по умолчанию будут идти пользовательские сообщения
start_message='Здесь должно быть ваше стартовое сообщение.'
```

## settings.json
Здесь по-хорошему руками ничего задавать не требуется.

```commandline
users: хранит для каждого пользователя, который выбрал канал для связи не по-умолчанию, channel ID, в который и из которого будет общение
channels: хранит список каналов, которые были добавлены помимо канала по-умолчанию.
messages: хранит ассоциации пересланных сообщений и пользователей, от которых эти сообщения были пересланы. В случае повреждения больше нельзя будет ответить на пересланное в чат данное сообщение от пользователя
```

# Run

```commandline
cd src
python3 main.py 
```


# Настройка
-1. Заполнить необходимое в `.env`
0. Запустить `python3 main.py`
1. Админ добавляет бота в чат, который хочет подключить к общению
2. В этом чате после добавления пишет команду `/add имя_чата_которое_будет_служить_командой_бота`. Например, если хочется данный чат использовать для 
фидбека по арендам, можно сказать `/add rent`, и тогда при перезапуске бота у него будет доступна для пользователя команда `/rent`, которая при вызове
переведёт пользователя в режим общения с данным каналом.
3. Повторить 1 и 2 для всех каналов.
4. Перезапустить бота. Теперь у него будет набор команд, переключающих пользователя между каналами.

# Hints

* Если неизвестно, какой у аккаунта админа ID, можно посмотреть с помощью этого бота через `/id` в личных сообщениях.
* Если неизвестно, какой у ID вашего чата по-умолчанию, можно посмотреть с помощью `/add default` в личных сообщениях. Команда вернёт вам id данного чата.
